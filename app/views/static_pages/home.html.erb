
<div class="center">
  <%= image_tag("OfficeLayout.png", id: "backgroundPNG", alt: "sample image") %>
  <div id="heatmap-container-wrapper">
    <div id="heatmap-container">
    </div>
  </div>
  </img>
  <!--  <%= link_to "SIGN UP", signup_path, class: "btn btn-lg btn-primary" %> -->
</div>

  <!-- <%= link_to image_tag("rails.png", alt: "Rails logo"), 'http://rubyonrails.org/' %> -->

<% if logged_in? %>
  <div class="row">
    <aside class="col-md-4">
      <section class="user_info">
        <%= render 'shared/user_info' %>
      </section>
      <!--
      <section class='micropost_form'>
        <%= render 'shared/micropost_form' %>
      </section>
      -->
    </aside>
    <div class="col-md-8">
      <h3>Sensor Status</h3>
      <%= render 'shared/feed' %>
    </div>
  </div>
<% end %>

<script>
  window.onload = function() {
    // create a heatmap instance
    var heatmap = h337.create({
      container: document.getElementById('heatmap-container'),
      maxOpacity: .4,
      radius: 40,
      blur: .90,
      // backgroundColor with alpha so you can see through it
      backgroundColor: 'rgba(255, 255, 255, 0.1)'
    });

    var heatmapContainer = document.getElementById('heatmap-container-wrapper');

    heatmapContainer.onmousemove = heatmapContainer.ontouchmove = function(e) {
      // we need preventDefault for the touchmove
      e.preventDefault();
      var x = e.layerX;
      var y = e.layerY;
      if (e.touches) {
        x = e.touches[0].pageX;
        y = e.touches[0].pageY;
      }

      heatmap.addData({ x: x, y: y, value: 0.1 });
    };

    heatmapContainer.onclick = function(e) {
      var x = e.layerX;
      var y = e.layerY;
      heatmap.addData({ x: x, y: y, value: 0.5 });
    };
  };
</script>

